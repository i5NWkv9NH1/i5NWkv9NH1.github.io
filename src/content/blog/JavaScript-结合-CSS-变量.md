---
title: JavaScript ç»“åˆ CSS å˜é‡
---

## å‰è¨€

![](https://s2.loli.net/2024/08/28/qpBNve6OJzRxmMg.gif)

ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Ÿ æ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªç®€å•çš„å°çƒåœ¨é¡µé¢ä¸Šæ°´å¹³ç§»åŠ¨ï¼Œæˆ‘ä»¬æƒ³è¦è®©å°çƒç§»åŠ¨çš„è·ç¦»åˆšå¥½ç­‰äºå®ƒçš„çˆ¶å…ƒç´ å®½åº¦å‡å»å°çƒæœ¬èº«çš„å®½åº¦ã€‚è¿™çœ‹èµ·æ¥æŒºç®€å•çš„ï¼Œå¯¹å§ï¼Ÿä½†é—®é¢˜æ¥äº†ï¼šåœ¨çº¯ CSS é‡Œï¼Œæˆ‘ä»¬æ²¡æ³•ç›´æ¥æ‹¿åˆ°å°çƒçˆ¶å…ƒç´ çš„å®½åº¦ï¼Œä¹Ÿå°±æ²¡æ³•ç”¨ CSS ç›´æ¥è®¡ç®—å‡ºå°çƒè¯¥ç§»åŠ¨å¤šè¿œã€‚ğŸ¤”

å¥½åœ¨æˆ‘ä»¬å¯ä»¥å€ŸåŠ© CSS å˜é‡ï¼Œé…åˆ JavaScript æ¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```css
transform: translateX(cacl(çˆ¶å…ƒç´ çš„å®½åº¦ - 100%))
```

## ç¤ºä¾‹ä»£ç 

```css
.container {
  width: 80%; /* çˆ¶å…ƒç´ çš„å®½åº¦ä¸ºçª—å£å®½åº¦çš„80% */
  height: 300px;
  border: 3px solid #aaa;
  position: relative;
  margin: 0 auto; /* å±…ä¸­æ˜¾ç¤º */
}

.ball {
  width: 100px; /* å°çƒçš„å®½åº¦ */
  height: 100px; 
  border-radius: 50%; /* åœ†å½¢å°çƒ */
  background: #f40; /* å°çƒçš„é¢œè‰² */
  left: 0;
  top: 30px;
  position: absolute; /* ç»å¯¹å®šä½ */
}
```

```js
const container = document.querySelector('.container'); // è·å–çˆ¶å…ƒç´ 
const w = container.clientWidth; // è·å–çˆ¶å…ƒç´ çš„å®½åº¦

// è®¾ç½® CSS å˜é‡ --wï¼Œå€¼ä¸ºçˆ¶å…ƒç´ çš„å®½åº¦
container.style.setProperty('--w', w + 'px');
```

è¿™æ ·ï¼Œåœ¨çˆ¶å…ƒç´ é‡Œå°±æ–°å¢äº†ä¸€ä¸ª css å˜é‡å€¼ã€‚

![](https://s2.loli.net/2024/08/28/l4e9G6StuMVEHDY.png)

ç°åœ¨ï¼Œæœ‰äº†ä¸€ä¸ª `--w` å˜é‡æ¥å­˜å‚¨çˆ¶å…ƒç´ çš„å®½åº¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå˜é‡æ¥å®šä¹‰å°çƒçš„æ°´å¹³ç§»åŠ¨åŠ¨ç”»ã€‚

```css
@keyframes move {
  50% {
    transform: translateX(calc(var(--w) - 100%)); /* ç§»åŠ¨çš„è·ç¦»ä¸ºçˆ¶å…ƒç´ å®½åº¦å‡å»å°çƒå®½åº¦ */
  }
}

.ball {
  animation: move 2s infinite; /* æ·»åŠ åŠ¨ç”» */
}
```

## è®©åŠ¨ç”»å“åº”çª—å£å°ºå¯¸å˜åŒ–

è™½ç„¶ä¸Šé¢çš„ä»£ç å·²ç»å¯ä»¥è®©å°çƒåŠ¨èµ·æ¥äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬è°ƒæ•´çª—å£å¤§å°ï¼Œå°çƒçš„ç§»åŠ¨è·ç¦»å°±ä¸ä¼šè‡ªåŠ¨è°ƒæ•´äº†ã€‚ä¸ºäº†è®©å®ƒæ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–ï¼Œå¹¶é‡æ–°è®¡ç®— CSS å˜é‡çš„å€¼ã€‚

```
const updateWidth = () => {
  const w = container.clientWidth;
  container.style.setProperty('--w', w + 'px');
};

window.addEventListener('resize', updateWidth); // ç›‘å¬çª—å£å¤§å°å˜åŒ–
updateWidth(); // åˆå§‹åŒ–æ—¶ä¹Ÿæ›´æ–°ä¸€æ¬¡
```

é€šè¿‡ç›‘å¬ `resize` äº‹ä»¶ï¼Œæ¯å½“çª—å£å¤§å°å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬éƒ½é‡æ–°è®¡ç®—çˆ¶å…ƒç´ çš„å®½åº¦å¹¶æ›´æ–° CSS å˜é‡ï¼Œè¿™æ ·å°çƒçš„ç§»åŠ¨å°±å§‹ç»ˆæ­£ç¡®ã€‚